<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Daaymn - Home</title>
<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
<div class="container">
  <header>
    <h1>Daaymn!</h1>
    <ul class="nav-tabs">
      <li><a href="index.html" class="active">Home</a></li>
      <li><a href="docs/home.html">App Home</a></li>
      <li><a href="docs/verification.html">Verify</a></li>
      <li><a href="docs/child_safety_policy.html">Child Safety</a></li>
      <li><a href="docs/privacy-policy.html">Privacy Policy</a></li>
      <li><a href="docs/account_deletion.html">Delete Account</a></li>
    </ul>
  </header>

  <main>
    <h2>The dating app that's actually worth your time is coming.</h2>
    <p>Be the first to know when we launch!</p>
    <form id="prereg-form">
      <input type="email" id="email-input" placeholder="Enter your email" required>
      <button type="submit">Notify Me</button>
    </form>
    <div id="response-message"></div>
  </main>
</div>

<script>
const supabaseUrl = 'https://rrbsjmfwahaerkfhpegv.supabase.co';
const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...';
const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

document.getElementById('prereg-form').addEventListener('submit', async e => {
    e.preventDefault();
    const email = document.getElementById('email-input').value.trim();
    if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)){
        document.getElementById('response-message').textContent = "Enter a valid email!";
        return;
    }
    try {
        const { error } = await supabase.from('preregistrations').insert([{email}]);
        if(error) throw error;
        document.getElementById('response-message').textContent = "You're on the list!";
        document.getElementById('email-input').value = '';
    } catch(err){
        document.getElementById('response-message').textContent = "Something went wrong.";
    }
});
</script>
</body>
</html>
